

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Neat-EO &mdash; Med-Data 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Yolo" href="yolo.html" />
    <link rel="prev" title="Bienvenue dans la documentation med-data" href="../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Med-Data
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Réseau neuronal</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Neat-EO</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#preparation">Préparation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#utilisation">Utilisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#les-outils">Les outils</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="yolo.html">Yolo</a></li>
<li class="toctree-l1"><a class="reference internal" href="yolt.html">Yolt</a></li>
<li class="toctree-l1"><a class="reference internal" href="senas.html">Senas</a></li>
</ul>
<p class="caption"><span class="caption-text">Logiciel Géospatial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../geospatial/postgis.html">PostGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geospatial/qgis.html">QGIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geospatial/overpass_turbo.html">Overpass Turbo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geospatial/postgresql.html">PostgreSQL</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Med-Data</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Neat-EO</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/reseau-neuronal/neat-eo.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="neat-eo">
<h1>Neat-EO<a class="headerlink" href="#neat-eo" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>L’installation de neat-eo est très simple et c’est passé sans acoup avec</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip3 install https://neat-eo.pink/latest
</pre></div>
</div>
<p>Il faut quand même faire attention que CUDA et le Driver Nvidia soi bien installé sinon une erreur vous disant que vous n’avez aucun GPU surviendrait durant l’entrainement.</p>
</div>
<div class="section" id="preparation">
<h2>Préparation<a class="headerlink" href="#preparation" title="Permalink to this headline">¶</a></h2>
<p>IL y’a deux façon de preparer votre dataset :</p>
<ol class="arabic simple">
<li><p>Soit par téléchargement grâce “neo download” et un serveur Web en WMS ou XYZ, pour télécharger directement les tiles mais attention il vous faudra un fichier cover  .tiles ou un .csv.  (Cette façon est en progression…)</p></li>
<li><p>Soit vous avez déjà une Ortophoto que vous avez déjà en votre possesion et que vous découperez en utilisant “neo tile”. Mais attention il vous faudra le geojson correspondant à l’image.</p></li>
</ol>
<p>Il vous faudra donc une Ortophoto (ou des tiles suivant la méthode que vous allez pouvoir découper en tiles grâce a NEAT, un geojson contenant les “Labels” qui vous intéressent (Building , Parking etc…)</p>
<p>Ainsi qu’un .csv qui regroupera les infos permettant au tiles d’avoir un ordre et de pouvoir s’assembler correctement ,  mais ce dernier peut être générer avec NEAT.</p>
<p><a class="reference external" href="https://github.com/hachem13/StageCerema/blob/master/docs/source/external-files/config_neat.toml">Ici le config.toml</a> qui est le file config de neat-eo pour votre entrainement d’entrainement, on peux y regler de nombreux paramètre comme la couleur , le nom des labels…</p>
<p>N’oubliez pas d’utiliser :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">NEO_CONFIG</span><span class="o">=</span>config_neat.toml
</pre></div>
</div>
<p>Pour utiliser votre fichier en Config.</p>
<p>J’ai eu un problème lors de l’entrainement , je n’avais pas assez de mémoire GPU , car j’ai 6 GO et 8go sont recomandé , pour résoudre mon problème j’ai reglé le “bs” (batch size) du config file sur 3 au lieu de 4, et l’entraînement à pu être éffectuer.</p>
</div>
<div class="section" id="utilisation">
<h2>Utilisation<a class="headerlink" href="#utilisation" title="Permalink to this headline">¶</a></h2>
<p>Je précise bien que neo s’utilise avec le terminal</p>
<p>La première methode avec neo download est encore en phase test je ne peux donc pas compléter cette partie.</p>
<p>La deuxième méthode avec une ortophoto déjà présente commence par le neo tile</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>neo tile --zoom <span class="m">19</span> --bands <span class="m">1</span>,2,3 --nodata_threshold <span class="m">25</span> --rasters <span class="o">[</span>CHEMIN VERS VOTRE IMAGE<span class="o">]</span> --out <span class="o">[</span>CHEMIN DE SORTIE<span class="o">]</span>
</pre></div>
</div>
<p>Après ça vous génererez le fichier cover :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>neo cover --dir <span class="o">[</span>CHEMIN DE VOS IMAGE<span class="o">]</span> --out <span class="o">[</span>CHEMIN DE SORTIE ET EXTENSIONS SOUHAITEZ<span class="o">]</span>
</pre></div>
</div>
<p>Ensuite vous “pixeliserais” le geojson en utilisant votre fichier cover :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>neo rasterize --geojson <span class="o">[</span>CHEMIN VERS VOTRE GEOJSON<span class="o">]</span> --type <span class="o">[</span>FEATURES SOUHAITEZ <span class="o">(</span>ex. Parking, Building..<span class="o">)]</span> --cover <span class="o">[</span>CHEMIN VERS VOTRE COVER<span class="o">]</span> --out <span class="o">[</span>CHEMIN DE SORTIE<span class="o">]</span>
</pre></div>
</div>
<p>Quand ces étapes sont faites on va pouvoir entrainer le model :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>neo train --dataset <span class="o">[</span>CHEMIN VERS VOTRE DATASET D<span class="s1">&#39;ENTRAINEMENT] --epochs [Nombre d&#39;</span>epoch à Entrainer<span class="o">]</span> --out <span class="o">[</span>CHEMIN DE SORTIE<span class="o">]</span>

neo <span class="nb">eval</span> --checkpoint <span class="o">[</span>CHEMIN VERS VOTRE DERNIER CHECKPOINT<span class="o">]</span> --dataset train

neo <span class="nb">eval</span> lance une evaluation à partir du checkpoint souhaitez
</pre></div>
</div>
<p>Après avoir entrainer votre model on va découpez l’image de prédiction avec neo tiles et les même paramètre que utiliser au début.</p>
<p>Après ça on lance la prédiction :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>neo predict --checkpoint model/checkpoint-00005.pth --dataset predict --metatiles --out predict/masks
</pre></div>
</div>
<p>La prédiction terminé on réutilise neo cover et neo rasterize sur la prediction :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>neo cover --dir predict/masks --out predict/cover.csv
neo rasterize --geojson predict/*/*-labels/*.geojson --type Building --cover predict/cover.csv --out predict/labels
</pre></div>
</div>
<p>On fait les comparaisons</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>neo compare --mode stack --images predict/images predict/labels predict/masks --cover predict/cover.csv --out predict/compare

neo compare --mode list --labels predict/labels --masks predict/masks --max Building QoD <span class="m">0</span>.80 --cover predict/cover.csv --geojson --out predict/compare/tiles.json

neo compare --mode side --images predict/images predict/compare --cover predict/cover.csv --out predict/compare_side
</pre></div>
</div>
<p>Et finalement on vectorize les résultats</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>neo vectorize --masks predict/masks --type Building --out predict/building.json
</pre></div>
</div>
<p>Vous pourrez retrouver un entrainement très sympas sur le repo de NEAT-EO</p>
</div>
<div class="section" id="les-outils">
<h2>Les outils<a class="headerlink" href="#les-outils" title="Permalink to this headline">¶</a></h2>
<p>Pour plus de précisions sur les outils rendez vous sur la Doc <a class="reference external" href="https://datapink.io/datapink/neat-EO/src/branch/master/docs/tools.md">tools</a>  de NEAT-EO</p>
<p><a class="reference external" href="https://datapink.io/datapink/neat-EO/src/branch/master/README.md">Source</a></p>
<div class="toctree-wrapper compound">
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="yolo.html" class="btn btn-neutral float-right" title="Yolo" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral float-left" title="Bienvenue dans la documentation med-data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, ejhb

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>